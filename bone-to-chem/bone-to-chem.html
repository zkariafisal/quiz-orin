<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ÿßÿÆÿ™ÿ®ÿßÿ± ŸÅŸä BONE, CANCER, CHEMICAL</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#4834d4;
      --accent:#f0932b;
      --bggrad: linear-gradient(135deg, #686de0, #4834d4);
      --ok:#2ecc71;
      --bad:#eb4d4b;
      --muted:#636e72;
      --card:#ffffff;
      --line:#e9eef5;
    }

    body{
      font-family:'Cairo',sans-serif;
      background:#f0f3f7;
      margin:0;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:10px;
      direction:rtl;
    }

    .card{
      background:var(--card);
      width:100%;
      max-width:720px;
      border-radius:22px;
      box-shadow:0 15px 40px rgba(0,0,0,.08);
      padding:18px 16px 20px;
      box-sizing:border-box;
      border:4px solid #fff;
      text-align:center;
    }

    .topbar{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .title-chip{
      background:#111827;
      color:#fff;
      padding:8px 14px;
      border-radius:999px;
      font-weight:900;
      font-size:14px;
    }
    .teacher-chip{
      background:var(--accent);
      color:#fff;
      padding:8px 14px;
      border-radius:999px;
      font-weight:900;
      font-size:14px;
    }

    .stats{
      display:flex;
      gap:10px;
      margin:10px 0 12px;
    }
    .stat{
      flex:1;
      background:#f8f9fa;
      border:1px solid #eee;
      border-radius:14px;
      padding:10px 8px;
    }
    .stat .label{ color:#111827; font-weight:900; font-size:14px; }
    .stat .value{ color:var(--primary); font-weight:900; font-size:22px; margin-top:2px; }

    input[type="text"]{
      width:100%;
      box-sizing:border-box;
      padding:12px;
      border-radius:12px;
      border:2px solid #ddd;
      font-family:'Cairo';
      text-align:center;
      margin:10px 0 14px;
      font-weight:800;
    }

    .btn{
      border:none;
      cursor:pointer;
      font-family:'Cairo';
      font-weight:900;
      border-radius:14px;
      padding:12px 14px;
      width:100%;
      transition:.15s;
    }
    .btn-primary{ background:var(--bggrad); color:#fff; }
    .btn-muted{ background:var(--muted); color:#fff; }
    .btn-light{ background:#fff; border:2px solid #dfe6ef; color:#111827; }
    .btn:active{ transform:scale(.99); }

    .numbers-wrap{
      background:#fff;
      border:1px solid var(--line);
      border-radius:16px;
      padding:10px 8px;
      margin:10px 0 14px;
    }
    .numbers{
      display:flex;
      gap:8px;
      overflow-x:auto;
      padding-bottom:6px;
      scroll-behavior:smooth;
      direction:ltr;
    }
    .numbers::-webkit-scrollbar{ height:8px; }
    .numbers::-webkit-scrollbar-thumb{ background:#dbe4ff; border-radius:999px; }

    .qnum{
      min-width:44px;
      height:44px;
      border-radius:14px;
      border:2px solid #dfe6ef;
      background:#fff;
      font-weight:900;
      color:#111827;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-shrink:0;
    }
    .qnum.active{
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(72,52,212,.10);
    }
    .qnum.correct{
      border-color:var(--ok);
      color:var(--ok);
      background:rgba(46,204,113,.08);
    }
    .qnum.wrong{
      border-color:var(--bad);
      color:var(--bad);
      background:rgba(235,77,75,.08);
    }

    .qbox{
      text-align:left;
      direction:ltr;
      margin-top:4px;
    }
    .qtext{
      font-weight:900;
      font-size:20px;
      line-height:1.35;
      margin:0 0 10px;
      color:#111827;
    }
    .qimg{
      width:100%;
      border-radius:16px;
      border:1px solid var(--line);
      margin:10px 0 8px;
      max-height:520px;
      object-fit:contain;
      background:#fff;
    }

    .options{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      margin-top:10px;
    }
    .opt{
      background:#fff;
      border:2px solid #e0e6ed;
      border-radius:16px;
      padding:14px 14px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-weight:900;
      color:#2d3436;
      direction:ltr;
      text-align:left;
      user-select:none;
    }
    .opt .badge{
      width:42px;
      height:42px;
      border-radius:14px;
      border:2px solid #dfe6ef;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color:#111827;
      flex-shrink:0;
    }
    .opt.correct{
      border-color:var(--ok);
      background:rgba(46,204,113,.10);
      color:#111827;
    }
    .opt.correct .badge{
      border-color:var(--ok);
      color:var(--ok);
      background:rgba(46,204,113,.12);
    }
    .opt.wrong{
      border-color:var(--bad);
      background:rgba(235,77,75,.10);
      color:#111827;
    }
    .opt.wrong .badge{
      border-color:var(--bad);
      color:var(--bad);
      background:rgba(235,77,75,.12);
    }

    .navrow{
      display:flex;
      gap:10px;
      margin:10px 0 12px;
    }

    .hidden{ display:none !important; }

    /* Result screen RTL */
    #result-screen{ direction:rtl; text-align:right; }
    #answers-report{ max-height:420px; overflow-y:auto; margin-top:12px; }
    .rep-item{
      border-radius:14px;
      padding:12px 12px;
      margin-bottom:10px;
      background:#fff;
      border:1px solid var(--line);
      border-right:6px solid #dfe6ef;
    }
    .rep-item.ok{ border-right-color:var(--ok); background:#f0fff4; }
    .rep-item.bad{ border-right-color:var(--bad); background:#fff5f5; }
    .small{ font-size:13px; color:#374151; font-weight:900; }

    /* Modal */
    .overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:14px;
      z-index:50;
    }
    .modal{
      width:100%;
      max-width:560px;
      background:#fff;
      border-radius:18px;
      padding:18px 16px;
      text-align:center;
      box-shadow:0 20px 60px rgba(0,0,0,.18);
    }
    .modal h3{ margin:0 0 10px; font-weight:900; font-size:22px; }
    .modal p{ margin:0 0 14px; font-weight:900; font-size:18px; }
    .modal .row{ display:flex; gap:10px; }
  </style>
</head>

<body>
  <div style="width:100%; display:flex; justify-content:center;">
    <!-- START -->
    <div id="start-screen" class="card">
      <div class="topbar">
        <div class="title-chip">ÿßÿÆÿ™ÿ®ÿßÿ± ŸÅŸä BONE, CANCER, CHEMICAL</div>
        <div class="teacher-chip">ÿ•ÿπÿØÿßÿØ Dr. Zakaria Al-Zubaidi</div>
      </div>
      <h2 style="margin:8px 0 0; color:var(--primary); font-weight:900;">ÿßÿ®ÿØÿ£ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</h2>
      <input id="student-name" type="text" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ÿßŸÑŸÉÿ±ŸäŸÖ ŸáŸÜÿß..." />
      <button id="start-btn" class="btn btn-primary">ÿ®ÿØÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</button>
    </div>

    <!-- QUIZ -->
    <div id="quiz-screen" class="card hidden">
      <div class="stats">
        <div class="stat">
          <div class="label">ÿßŸÑÿ≥ÿ§ÿßŸÑ</div>
          <div class="value"><span id="current-q-num">1</span>/<span id="total-q-num">0</span></div>
        </div>
        <div class="stat">
          <div class="label">ÿßŸÑŸàŸÇÿ™</div>
          <div class="value" id="time">01:06:00</div>
        </div>
      </div>

      <button id="finish-btn" class="btn btn-muted">ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</button>

      <div class="numbers-wrap">
        <div id="numbers" class="numbers"></div>
      </div>

      <div class="qbox">
        <div id="question-area"></div>
      </div>

      <div class="navrow">
        <button id="prev-btn" class="btn btn-light">ÿßŸÑÿ≥ÿßÿ®ŸÇ</button>
        <button id="next-btn" class="btn btn-light">ÿßŸÑÿ™ÿßŸÑŸä</button>
      </div>
    </div>

    <!-- RESULT -->
    <div id="result-screen" class="card hidden">
      <div style="font-size:28px; font-weight:900; color:var(--primary); text-align:center;">ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ£ÿØÿßÿ°</div>

      <div id="score-display" style="font-size:40px; font-weight:900; color:#111827; margin-top:10px; text-align:center;"></div>
      <div id="percent-display" style="font-size:22px; font-weight:900; color:#111827; margin-top:6px; text-align:center;"></div>

      <div class="small" style="margin-top:10px;">ÿßŸÑÿ∑ÿßŸÑÿ®: <span id="report-name" style="font-weight:900;"></span></div>

      <hr style="border:none; height:1px; background:#e5e7eb; margin:12px 0;">

      <div id="answers-report"></div>

      <button id="restart-btn" class="btn btn-muted" style="margin-top:12px;">ÿ•ÿπÿßÿØÿ© ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</button>
    </div>
  </div>

  <!-- MODAL -->
  <div id="modal" class="overlay hidden">
    <div class="modal">
      <h3>ÿ™ŸÜÿ®ŸäŸá</h3>
      <p>ÿ®ŸÇŸäÿ™ ŸÑÿØŸäŸÉ ÿ£ÿ≥ÿ¶ŸÑÿ© ŸÑŸÖ ÿ™ÿ¨ÿ® ÿπŸÑŸäŸáÿß. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿü</p>
      <div class="row">
        <button id="modal-yes" class="btn btn-muted">ŸÜÿπŸÖ</button>
        <button id="modal-no" class="btn btn-light">ŸÑÿß</button>
      </div>
    </div>
  </div>

<script>
  // =========================
  // ÿßŸÑŸàŸÇÿ™: 66 ÿØŸÇŸäŸÇÿ© => HH:MM:SS
  // =========================
  const TOTAL_MINUTES = 66;

  // =========================
  // ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© (ŸÜŸÅÿ≥ ŸÇÿßÿ¶ŸÖÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©) + ÿ≠ÿ∞ŸÅ ÿ≥ÿ§ÿßŸÑ 47 (ÿ≠ÿ≥ÿ® ÿ∑ŸÑÿ®ŸÉ)
  // ŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ£ŸÜÿß ŸÑŸÖ ÿ£ÿ≥ÿ™ÿ∑ÿπ ÿ™ÿ≠ÿØŸäÿØ "ÿ≥ÿ§ÿßŸÑ 47" ŸÖŸÜ ÿπŸÜÿØŸÉ ÿ®ÿßŸÑÿ∂ÿ®ÿ∑ ÿ®ÿØŸàŸÜ ŸÜÿµŸáÿå
  // ŸÑÿ∞ŸÑŸÉ ŸáŸÜÿß ÿ≠ÿ∞ŸÅÿ™Ÿá ÿ®ÿ¥ÿ±ÿ∑ ŸÜÿµ ÿßŸÑÿ≥ÿ§ÿßŸÑ: "Which is the least dominant tautomerism form of histamine at physiological pH?"
  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÇÿµÿØŸÉ ÿ≥ÿ§ÿßŸÑ ÿ¢ÿÆÿ±ÿå ŸÅŸÇÿ∑ ŸÇŸÑŸëŸä ŸÜÿµ ÿßŸÑÿ≥ÿ§ÿßŸÑ Ÿàÿ£ŸÜÿß ÿ£ÿ≠ÿ∞ŸÅŸá ŸÑŸÉ ŸÅŸàÿ±ÿßŸã.
  // =========================

  const rawQuestions = [
    //1
    { q: "Medication for osteoporosis in menopausal women given monthly?", options: ["Zoledronic acid", "Ibandronate", "Raloxifene", "Alendronate"], correct: 1 },
    //2
    { q: "Medication for osteoporosis in women given once per a year?", options: ["Zoledronic acid", "Ibandronate", "Raloxifene", "Alendronate"], correct: 0 },
    //3
    { q: "Medication for osteoporosis in women given weekly?", options: ["Zoledronic acid", "Ibandronate", "Raloxifene", "Alendronate"], correct: 3 },
    //4
    { q: "Gold standard test for osteoporosis?", options: ["DEXA (Dual-energy X-ray absorptiometry)", "MRI", "CT", "Ultrasound"], correct: 0 },
    //5
    { q: "Patient with osteoporosis: which is needed for diagnosis?", options: ["X-ray", "MRI", "CT", "PET scan"], correct: 0 },
    //6
    { q: "Which osteoporosis drug can cause esophageal ulcers?", options: ["Denosumab", "Teriparatide", "Alendronate", "Zoledronic acid"], correct: 2 },
    //7
    { q: "Which medication for osteoporosis will significantly reduce the risk of hip fracture?", options: ["Phosphate", "Risedronate", "Raloxifene", "Calcitonin"], correct: 1 },
    //8
    { q: "A 65-year patient suffered from osteomalacia with numbness and tingling. Vitamin D and an IV calcium supplement were prescribed. Which calcium salt was most likely prescribed?", options: ["Calcium citrate (21% calcium)", "Calcium lactate (13% calcium)", "Calcium gluconate (9% calcium)", "Calcium phosphate (39% calcium)"], correct: 2 },
    //9
    { q: "A 25-year-old man with leukemia admitted to oncology center. Who is allowed to read the patient file without additional permission?", options: ["Patient's cousin who is working as an outpatient nurse", "Medical resident in pediatrics who wants to explore leukemia risk", "Clinical nutritionist assigned to calculate requirements for the patient", "Pharmacy resident planning a research on cell transplant"], correct: 2 },
    //10
    { q: "Which anti-neoplastic medication is known to cause bone marrow suppression?", options: ["Bleomycin", "Vincristine", "Doxorubicin", "L-asparaginase"], correct: 2 },
    //11
    { q: "Which of the following is an alkylating anticancer agent?", options: ["Cyclophosphamide", "Fluorouracil", "Doxorubicin", "Etoposide"], correct: 0 },
    //12
    { q: "A patient refuses surgery and chemotherapy due to beauty concerns. What is the most appropriate suggestion?", options: ["Start chemotherapy with very low doses and less frequency", "Go with surgery immediately without discussion", "Discuss risks and benefits with the patient and take the decision", "Force chemotherapy and advise hair extensions"], correct: 2 },
    //13
    { q: "Which anti-cancer alkaloid stabilizes microtubule polymer and protects it from disassembly?", options: ["Paclitaxel", "Colchicine", "Vinblastine", "Camptothecin"], correct: 0 },
    //14
    { q: "Which recommendation reduces inadvertent intrathecal administration of vincristine?", options: ["Dispense the syringe without needle", "Dispense vincristine in a 60-mL syringe", "Dispense vincristine in a mini-bag instead of syringe", "Dispense the vial for bedside preparation"], correct: 2 },
    //15
    { q: "What is the most common adverse reaction of doxorubicin?", options: ["Bone marrow depression", "Hepatic toxicity", "Cardiac toxicity", "Skin necrosis"], correct: 2 },
    //16
    { q: "What is the therapeutic indication for nilotinib?", options: ["Ulcerative colitis", "Familial hyperlipidemia", "Relapsing-remitting multiple sclerosis", "Philadelphia chromosome positive chronic myelogenous leukemia"], correct: 3 },
    //17
    { q: "A 40-year-old woman with breast cancer: topoisomerase is elevated. Which drug should be used?", options: ["Cyclophosphamide", "Melphalan", "Irinotecan", "Methotrexate"], correct: 2 },
    //18
    { q: "Immune system plays an important role in cancer treatment by?", options: ["Macrophage", "Cytotoxic CD8", "Complex", "Neutrophils only"], correct: 1 },
    //19
    { q: "Cysteine in chemotherapy agent benefit?", options: ["Increase target", "Increase effects", "Increase solubility", "More information needed"], correct: 1 },
    //20
//20
{ 
  q: "Acetaminophen binds to a cytosolic protein. Which type of bond is formed between the protonated amine of acetaminophen and the cytosolic acid of the aspartate residue of the protein?",
  img:"images/Acetaminophen.jpg",
  options: ["Ionic bond", "Covalent bond", "Hydrogen bond", "Van der Waals interaction"],
  correct: 2
},    //21
    { q: "Which of the following molecules contains double bond?", options: ["CH3", "CNH", "C2H2", "C2H4"], correct: 3 },
    //22
{
  q: "Quinine is an important antimalarial drug and very sensitive to stereochemistry. If stereochemistry at the arrow changes from R to S, which pharmacological activity will the drug possess?",
  img:"images/quinine-quinidine.jpg",
  options: ["Anticancer", "Antimalarial", "Anticoagulant", "Antiarrhythmic"],
  correct: 3
},    //23
{
  q: "Acetaminophen binds to a cytosolic protein. Which type of bond is formed between the protonated amine of acetaminophen and the carboxylic acid of the aspartate residue of the protein?",
  img:"images/Acetaminophen.jpg",
  options: ["Ionic bond", "Covalent bond", "Hydrogen bond", "Van der Waals interaction"],
  correct: 2
},    //24
    { q: "Which of the following can be used safely in a patient with sulfa allergy?", options: ["Gliclazide", "Furosemide", "Sulfamethoxazole", "Sodium thiosulfate"], correct: 3 },
    //25
    //25
{
  q: "The structure of a norepinephrine-serotonin reuptake inhibitor (NSRI) is shown. Which modification can transform it into a selective norepinephrine reuptake inhibitor analogue?",
  img:"images/NSRI.jpg",
  options: ["Quaternization of the side chain amino group", "Transform side chain amino group into a primary amine", "Replace N,N-dimethylamino group with hydroxyl group", "Demethylation of tertiary amino group to yield a secondary amino group"],
  correct: 3
},

//26
{
  q: "Thalidomide exists in two conformations with different activities. What is the most appropriate term to call the two conformations?",
  img:"images/Thalidomide.jpg",
  options: ["Isomers", "Epimers", "Enantiomers", "Diastereomers"],
  correct: 2
},

//27
{
  q: "Glibenclamide (glyburide) is an N-sulfonylurea. Which pharmacophore does it contain?",
  img:"images/Glibenclamide.jpg",
  options: ["Benzenesulfate urea", "Benzenesulfinyl urea", "Benzenesulfhydryl urea", "Benzenesulfonyl urea"],
  correct: 3
},

//28
{
  q: "Aspirin is a well-known antiplatelet agent. What is the role of the acetyl group in its antiplatelet activity?",
  img:"images/Aspirin.jpg",
  options: ["Good leaving group to form active salicylic acid", "Hydrogen bonding with tyrosine on COX", "Covalent binding with serine on COX binding site", "Hydrophobic binding with tryptophan on COX binding site"],
  correct: 2
},

//29
{
  q: "Examine the drug in the figure (codeine). What is the effect of replacing the methoxyl group (boxed) with a hydroxyl group?",
  img:"images/Codeine.jpg",
  options: ["Decrease in analgesic activity", "Decrease in addiction activity", "Reduction in the antitussive activity", "Lower affinity to morphine receptors"],
  correct: 2
},

//30
{
  q: "The structure of erythromycin is shown. Why is erythromycin sensitive to acidic pH?",
  img:"images/erythromycin.jpg",
  options: ["Presence of lactone group in the ring", "Presence of two basic sugars at positions 3 and 5", "Presence of many methyl groups at alternate positions", "Ketal formation between hydroxyls (6 and 12) and ketone at position 9"],
  correct: 3
},
   //31
    { q: "Which polymorphic enzyme converts codeine to morphine?", options: ["CYP2D6", "CYP2C9", "CCR5 coreceptor", "N-Acetyltransferase"], correct: 0 },
//32
{
  q: "Structures of four antidepressants are shown. Which structure undergoes a photo-oxidation reaction upon exposure to light?",
  img:"images/Antidepressant.jpg",
  options: ["1", "2", "3", "4"],
  correct: 0
},

//33
{
  q: "Four NSAIDs are shown. Which NSAID has minimal possible gastric side effects?",
  img:"images/NSAIDs.jpg",
  options: ["Ibuprofen", "Celecoxib", "Indomethacin", "Diclofenac"],
  correct: 1
},
 //34
    { q: "What is the most common cause of drug instability?", options: ["Oxidation", "Racemization", "Epimerization", "Decarboxylation"], correct: 0 },
35
{
  q: "structure of Ciprofloxacin Which of the following is the benefit of the piperazine group at position?",
  img:"images/Ciprofloxacin.jpg",
  options: ["Increases drug resistance to Œ≤-lactamase", "Improves the oral bioavailability of the drug", "Increases lipophilicity and penetration of the bacterial cell wall", "Improves the spectrum of antibacterial activity (especially Gram-negative)"],
  correct: 3
},
 //36
    { q: "Which one of the following is the effect of alkaline buffers in commercial aspirin formulations?", options: ["They have no effect on the rate of absorption", "They increase absorption by alkalinizing stomach pH", "They reduce absorption by converting aspirin to less readily absorbed ionic form", "They increase absorption by increasing pH immediately around disintegrating particles and accelerating dissolution"], correct: 3 },
    37
{
  q: "Examine the chemical structure of diclofenac. Which structure best represents a major active metabolite of diclofenac?",
  img:"images/Diclofenac.jpg",
  options: ["1", "2", "3", "4"],
  correct: 3
},

//38
{
  q: "The presented structure belongs to the proton pump inhibitor tenatoprazole. Which metabolic reaction can occur at the pointed arrow?",
  img:"images/Tenatoprazole.png",
  options: ["Sulfation", "Oxidation", "Demethylation", "Glucuronidation"],
  correct: 1
},

//39
{
  q: "Which of the following medications contains triazole moiety?",
  img:"images/Triazol-moiety.jpg",
  options: ["Fluconazole", "Erythromycin", "Aspirin", "Metformin"],
  correct: 0
},

//40
{
  q: "Histamine (pKa = 9.4) is released during allergic reactions. Which is the least dominant tautomer of histamine at physiological pH?",
  img:"images/Histamine.jpg",
  options: ["a", "b", "c", "d"],
  correct: 1
},

//41
{
  q: "D-Galactose and D-Mannose differ in configuration. Which type of stereo-isomerization do these sugars represent?",
  img:"images/Epimers-of-D-Glucose.jpg",
  options: ["Isomers", "Epimers", "Anomers", "Diastereomers"],
  correct: 3
},

//42
{
  q: "Ropivacaine and 4 other local anesthetics are shown. Which is the bioisoster for ropivacaine?",
  img:"images/Ropivancaine.png",
  options: ["Etidocaine", "Bupivacaine", "Mepivacaine", "Levobupivacaine"],
  correct: 3
},
  //43
    { q: "Amphotericin undergoes which reaction?", options: ["Hydrolysis", "Alkylation", "Reduction", "Oxidation"], correct: 0 },
    //44
    { q: "Epimer of glucose?", options: ["Ribose", "Galactose", "Deoxyribose", "Fructose"], correct: 1 },
    //45
    { q: "Two chemical configurations for the same drug, one is R and the other is S. What is it called?", options: ["Enantiomers", "Epimers", "Anomers", "Polymorphs"], correct: 0 },
    //46
    { q: "Morphine to heroin transformation is mainly?", options: ["Carboxylation", "Esterification", "Hydroxylation", "Oxidation"], correct: 1 },
    //47 (ŸÖÿ≠ÿ∞ŸàŸÅ ÿ≠ÿ≥ÿ® ÿ∑ŸÑÿ®ŸÉ)
    //48
    { q: "Type of bond between amino acids?", options: ["Amide (peptide) bond", "Disulfide bond", "Ionic bond", "Van der Waals bond"], correct: 0 },
    //49
    { q: "Aspirin metabolism?", options: ["Methylation", "Hydroxylation", "Conjugation", "Hydrolysis"], correct: 3 },
    //50
    { q: "Bond between carboxyl and amine?", options: ["Hydrogen bond", "Ionic bond", "Peptide bond", "Covalent bond"], correct: 2 },
    //51
    { q: "Benzimidazole and pyridine connected together with?", options: ["Disulphide bond", "Peptide bond", "Ester bond", "methylene linked"], correct: 3 },
    //52
    { q: "In zidovudine (AZT) structure, which part removal makes the antiviral drug not effective?", options: ["N3", "CH3", "C=O", "OH"], correct: 0 },
    //53
    { q: "Which element is NOT involved in heterocyclic compounds?", options: ["N", "H", "Se", "Fe"], correct: 3 },
    //54
    { q: "Ephedrine vs phenylephrine: addition of hydroxyl group does what to activity?", options: ["Increase alpha 1", "Decrease alpha 1", "Increase alpha 2", "Decrease alpha 2"], correct: 0 }
  ];

  // =========================
  // ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ŸÉÿ±ÿßÿ± ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã
  // =========================
  function normalizeQ(s){
    return (s || "")
      .toLowerCase()
      .replace(/\s+/g,' ')
      .replace(/[?ÿü]+$/,'')
      .trim();
  }
  function dedupeQuestions(list){
    const seen = new Set();
    const out = [];
    for(const item of list){
      const key = normalizeQ(item.q);
      if(!key) continue;
      if(seen.has(key)) continue;
      seen.add(key);

      const opts = (item.options || []).slice(0,4);
      while(opts.length < 4) opts.push("More information is needed");
      const c = Math.min(Math.max(item.correct ?? 0, 0), 3);

      out.push({ q:item.q, img:item.img, options:opts, correct:c });
    }
    return out;
  }

  const questions = dedupeQuestions(rawQuestions);

  // =========================
  // ÿßŸÑÿ≠ÿßŸÑÿ© ŸàÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™
  // =========================
  const total = questions.length;
  let current = 0;
  let score = 0;
  let studentName = "";
  let timeLeft = TOTAL_MINUTES * 60;
  let timer = null;
  let quizStarted = false;

  const answers = Array(total).fill(null);

  // =========================
  // ÿßŸÑÿπŸÜÿßÿµÿ±
  // =========================
  const startScreen = document.getElementById('start-screen');
  const quizScreen  = document.getElementById('quiz-screen');
  const resultScreen= document.getElementById('result-screen');

  const startBtn = document.getElementById('start-btn');
  const finishBtn = document.getElementById('finish-btn');
  const restartBtn = document.getElementById('restart-btn');

  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');

  const timeEl = document.getElementById('time');
  const curEl = document.getElementById('current-q-num');
  const totEl = document.getElementById('total-q-num');

  const numbersEl = document.getElementById('numbers');
  const questionArea = document.getElementById('question-area');

  const modal = document.getElementById('modal');
  const modalYes = document.getElementById('modal-yes');
  const modalNo  = document.getElementById('modal-no');

  modal.classList.add('hidden');
  totEl.textContent = total;

  // =========================
  // ÿØŸàÿßŸÑ ŸÖÿ≥ÿßÿπÿØÿ©
  // =========================
  function fmtTime(sec){
    const h = Math.floor(sec / 3600);
    const m = Math.floor((sec % 3600) / 60);
    const s = sec % 60;
    const hh = String(h).padStart(2,'0');
    const mm = String(m).padStart(2,'0');
    const ss = String(s).padStart(2,'0');
    return `${hh}:${mm}:${ss}`;
  }

  function ensureQuestionMark(txt){
    const t = (txt || "").trim();
    if(!t) return "";
    return /[?ÿü]$/.test(t) ? t : (t + "?");
  }

  function buildNumbers(){
    numbersEl.innerHTML = "";
    for(let i=0;i<total;i++){
      const b = document.createElement('button');
      b.className = "qnum";
      b.textContent = (i+1);
      b.onclick = () => goTo(i);
      numbersEl.appendChild(b);
    }
    refreshNumbers(true);
  }

  // ‚úÖ ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©: ÿßŸÑÿ¥ÿ±Ÿäÿ∑ Ÿäÿ™ÿ≠ÿ±ŸÉ ŸÖÿπ ÿßŸÑÿ≥ÿ§ÿßŸÑ ÿ®ÿ¥ŸÉŸÑ ŸÖÿ∂ŸÖŸàŸÜ ÿπŸÑŸâ ÿßŸÑÿ¨ŸàÿßŸÑ
  function refreshNumbers(autoScroll){
    const btns = document.querySelectorAll('.qnum');

    btns.forEach((b, i) => {
      b.classList.toggle('active', i === current);
      b.classList.remove('correct','wrong');
      if(answers[i]){
        b.classList.add(answers[i].isCorrect ? 'correct' : 'wrong');
      }
    });

    if(autoScroll){
      const active = btns[current];
      if(active){
        active.scrollIntoView({
          behavior: 'smooth',
          inline: 'center',
          block: 'nearest'
        });
        setTimeout(() => {
          active.scrollIntoView({
            behavior: 'smooth',
            inline: 'center',
            block: 'nearest'
          });
        }, 50);
      }
    }
  }

  function renderQuestion(){
  const q = questions[current];
  curEl.textContent = current + 1;

  const imgHtml = q.img ? `
    <div style="display:flex;justify-content:center;margin:8px 0;">
      <button onclick="showImg('img${current}', this)" 
        style="background:#fff;border:2px solid #dfe6ef;border-radius:14px;padding:6px 10px;font-weight:900;cursor:pointer">
        üñºÔ∏è ÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±ÿ©
      </button>
    </div>
    <img id="img${current}" class="qimg" data-src="${q.img}" alt="question image" style="display:none">
  ` : "";

  const text = ensureQuestionMark(q.q);

  questionArea.innerHTML = `
    <div class="qtext">${text}</div>
    ${imgHtml}
    <div class="options" id="opts"></div>
  `;

  const opts = document.getElementById('opts');
  const letters = ["A","B","C","D"];

  q.options.forEach((t, idx) => {
    const btn = document.createElement('div');
    btn.className = "opt";
    btn.innerHTML = `
      <div class="badge">${letters[idx]}</div>
      <div style="flex:1">${t}</div>
    `;
    btn.onclick = () => choose(idx);
    opts.appendChild(btn);
  });

  if(answers[current]){
    paintAnswered();
    lockOptions(true);
  }else{
    lockOptions(false);
  }

  refreshNumbers(true);
}
function showImg(id, btn){
  const img = document.getElementById(id);
  if(!img.src){
    img.src = img.dataset.src;
  }
  img.style.display = "block";
  btn.style.display = "none";
}

  function lockOptions(lock){
    const opts = document.querySelectorAll('.opt');
    opts.forEach(o => o.style.pointerEvents = lock ? 'none' : 'auto');
  }

  function paintAnswered(){
    const q = questions[current];
    const opts = document.querySelectorAll('.opt');
    const chosen = answers[current].chosen;

    opts.forEach((o, idx) => {
      o.classList.remove('correct','wrong');
      if(idx === q.correct) o.classList.add('correct');
      if(idx === chosen && chosen !== q.correct) o.classList.add('wrong');
    });
  }

  function unansweredCount(){
    return answers.filter(a => a === null).length;
  }

  function openModal(){ modal.classList.remove('hidden'); }
  function closeModal(){ modal.classList.add('hidden'); }

  function tryFinish(){
    if(!quizStarted) return;
    const u = unansweredCount();
    if(u > 0) openModal();
    else finishNow();
  }

  function choose(idx){
    const q = questions[current];
    const isCorrect = idx === q.correct;

    if(!answers[current]){
      if(isCorrect) score++;
    }else{
      if(answers[current].isCorrect && !isCorrect) score--;
      if(!answers[current].isCorrect && isCorrect) score++;
    }

    answers[current] = { chosen: idx, isCorrect };
    paintAnswered();
    lockOptions(true);
    refreshNumbers(true);

    setTimeout(() => {
      if(current < total - 1) {
        goTo(current + 1);
      } else {
        tryFinish();
      }
    }, 650);
  }

  function goTo(i){
    current = Math.max(0, Math.min(total-1, i));
    renderQuestion();
  }

  function finishNow(){
    clearInterval(timer);
    quizScreen.classList.add('hidden');
    resultScreen.classList.remove('hidden');

    document.getElementById('report-name').textContent = studentName;

    const percent = Math.round((score / total) * 100);
    document.getElementById('score-display').textContent = `${score} / ${total}`;
    document.getElementById('percent-display').textContent = `ÿßŸÑŸÜÿ≥ÿ®ÿ©: ${percent}%`;

    const rep = document.getElementById('answers-report');
    rep.innerHTML = "";

    const letters = ["A","B","C","D"];

    answers.forEach((a, i) => {
      const q = questions[i];
      const item = document.createElement('div');
      const ok = a && a.isCorrect;

      item.className = "rep-item " + (ok ? "ok" : "bad");

      const userTxt = a ? `${letters[a.chosen]}: ${q.options[a.chosen]}` : "ŸÑŸÖ ÿ™ÿ™ŸÖ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©";
      const corTxt  = `${letters[q.correct]}: ${q.options[q.correct]}`;
      const qt = ensureQuestionMark(q.q);

      item.innerHTML = `
        <div style="font-weight:900; color:#111827; margin-bottom:6px; direction:ltr; text-align:left;">
          ${qt}
        </div>
        <div class="small">ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ: ${userTxt}</div>
        <div class="small">ÿßŸÑÿµÿ≠Ÿäÿ≠: ${corTxt}</div>
      `;
      rep.appendChild(item);
    });
  }

  function startQuiz(){
    quizStarted = true;
    startScreen.classList.add('hidden');
    resultScreen.classList.add('hidden');
    quizScreen.classList.remove('hidden');

    current = 0;
    score = 0;
    for(let i=0;i<answers.length;i++) answers[i] = null;

    buildNumbers();
    renderQuestion();

    clearInterval(timer);
    timeLeft = TOTAL_MINUTES * 60;
    timeEl.textContent = fmtTime(timeLeft);

    timer = setInterval(() => {
      timeLeft--;
      timeEl.textContent = fmtTime(timeLeft);
      if(timeLeft <= 0){
        clearInterval(timer);
        finishNow();
      }
    }, 1000);
  }

  // =========================
  // ÿßŸÑÿ£ÿ≠ÿØÿßÿ´
  // =========================
  startBtn.onclick = () => {
    studentName = document.getElementById('student-name').value.trim();
    if(!studentName) return alert("ÿßŸÉÿ™ÿ® ÿßŸÑÿßÿ≥ŸÖ ÿ£ŸàŸÑÿßŸã");
    startQuiz();
  };

  restartBtn.onclick = () => startQuiz();

  finishBtn.onclick = () => tryFinish();

  prevBtn.onclick = () => { if(current > 0) goTo(current - 1); };
  nextBtn.onclick = () => { if(current < total - 1) goTo(current + 1); else tryFinish(); };

  modalYes.onclick = () => { closeModal(); finishNow(); };
  modalNo.onclick  = () => {
    closeModal();
    const idx = answers.findIndex(a => a === null);
    if(idx !== -1) goTo(idx);
  };
</script>
</body>
          </html>
